1:"$Sreact.fragment"
27:I[22016,["/_next/static/chunks/8f173d2467642866.js","/_next/static/chunks/1b2fdb160f3fcd04.js"],""]
28:I[97367,["/_next/static/chunks/ff1a16fafef87110.js","/_next/static/chunks/247eb132b7f7b574.js"],"OutletBoundary"]
29:"$Sreact.suspense"
0:{"buildId":"LQKOFVf11kPSZcae8CcMd","rsc":["$","$1","c",{"children":[["$","div",null,{"className":"prose prose-zinc dark:prose-invert max-w-none text-zinc-900 dark:text-zinc-100","children":[["$","h1",null,{"className":"text-4xl font-bold text-zinc-900 dark:text-zinc-100 mb-4","children":"IAM Policy Setup"}],["$","p",null,{"className":"text-xl text-zinc-600 dark:text-zinc-300 mb-8","children":"Configure AWS IAM roles and policies to grant StackSage read-only access to your AWS resources."}],["$","div",null,{"className":"not-prose my-6 rounded-lg border border-blue-200 dark:border-blue-900 bg-blue-50 dark:bg-blue-950 p-4","children":["$","div",null,{"className":"flex items-start gap-3","children":[["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","width":24,"height":24,"viewBox":"0 0 24 24","fill":"none","stroke":"currentColor","strokeWidth":2,"strokeLinecap":"round","strokeLinejoin":"round","className":"lucide lucide-shield h-5 w-5 mt-0.5 text-blue-600 dark:text-blue-400","aria-hidden":"true","children":[["$","path","oel41y",{"d":"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z"}],"$undefined"]}],["$","div",null,{"children":[["$","p",null,{"className":"text-sm font-medium text-blue-900 dark:text-blue-100 mb-1","children":"Privacy-First Architecture"}],["$","p",null,{"className":"text-sm text-blue-800 dark:text-blue-200 mb-0","children":"StackSage runs entirely in your GitHub Actions environment. Your AWS credentials never leave your infrastructure."}]]}]]}]}],["$","h2",null,{"children":"Overview"}],["$","p",null,{"children":"StackSage requires an IAM role in your AWS account with read-only permissions. This role will be assumed by GitHub Actions using OIDC (OpenID Connect) - no long-lived credentials needed."}],["$","h2",null,{"children":"Step 1: Create Trust Policy"}],["$","p",null,{"children":["Create a file ",["$","code",null,{"children":"trust-policy.json"}]," that allows GitHub Actions to assume the role:"]}],["$","div",null,{"className":"not-prose my-6","children":["$","div",null,{"className":"rounded-lg border border-zinc-200 dark:border-zinc-800 bg-zinc-50 dark:bg-zinc-900 p-4","children":["$","div",null,{"className":"flex items-start gap-3","children":[["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","width":24,"height":24,"viewBox":"0 0 24 24","fill":"none","stroke":"currentColor","strokeWidth":2,"strokeLinecap":"round","strokeLinejoin":"round","className":"lucide lucide-terminal h-5 w-5 mt-0.5 text-zinc-600 dark:text-zinc-400","aria-hidden":"true","children":[["$","path","baeox8",{"d":"M12 19h8"}],["$","path","1yngyt",{"d":"m4 17 6-6-6-6"}],"$undefined"]}],["$","div",null,{"className":"flex-1","children":["$","pre",null,{"className":"text-sm overflow-x-auto","children":["$","code",null,{"children":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Principal\": {\n        \"Federated\": \"arn:aws:iam::YOUR_ACCOUNT_ID:oidc-provider/token.actions.githubusercontent.com\"\n      },\n      \"Action\": \"sts:AssumeRoleWithWebIdentity\",\n      \"Condition\": {\n        \"StringEquals\": {\n          \"token.actions.githubusercontent.com:aud\": \"sts.amazonaws.com\"\n        },\n        \"StringLike\": {\n          \"token.actions.githubusercontent.com:sub\": \"repo:YOUR_ORG/YOUR_REPO:*\"\n        }\n      }\n    }\n  ]\n}"}]}]}]]}]}]}],["$","div",null,{"className":"not-prose my-6 rounded-lg border border-orange-200 dark:border-orange-900 bg-orange-50 dark:bg-orange-950 p-4","children":["$","div",null,{"className":"flex items-start gap-3","children":[["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","width":24,"height":24,"viewBox":"0 0 24 24","fill":"none","stroke":"currentColor","strokeWidth":2,"strokeLinecap":"round","strokeLinejoin":"round","className":"lucide lucide-circle-alert h-5 w-5 mt-0.5 text-orange-600 dark:text-orange-400","aria-hidden":"true","children":["$L2","$L3","$L4","$undefined"]}],"$L5"]}]}],"$L6","$L7","$L8","$L9","$La","$Lb","$Lc","$Ld","$Le","$Lf","$L10","$L11","$L12","$L13","$L14","$L15","$L16","$L17","$L18","$L19","$L1a","$L1b","$L1c","$L1d","$L1e","$L1f","$L20","$L21","$L22","$L23","$L24"]}],null,"$L25"]}],"loading":null,"isPartial":false}
2:["$","circle","1mglay",{"cx":"12","cy":"12","r":"10"}]
3:["$","line","1pkeuh",{"x1":"12","x2":"12","y1":"8","y2":"12"}]
4:["$","line","4dfq90",{"x1":"12","x2":"12.01","y1":"16","y2":"16"}]
5:["$","div",null,{"children":[["$","p",null,{"className":"text-sm font-medium text-orange-900 dark:text-orange-100 mb-1","children":"First-Time Setup"}],["$","p",null,{"className":"text-sm text-orange-800 dark:text-orange-200 mb-0","children":["If you haven't set up GitHub OIDC before, you'll need to create the OIDC provider first. See"," ",["$","a",null,{"href":"https://docs.github.com/en/actions/deployment/security-hardening-your-deployments/configuring-openid-connect-in-amazon-web-services","target":"_blank","rel":"noopener noreferrer","className":"underline","children":"GitHub's documentation"}],"."]}]]}]
6:["$","h2",null,{"children":"Step 2: Create IAM Role"}]
7:["$","p",null,{"children":"Create the IAM role using the trust policy:"}]
8:["$","div",null,{"className":"not-prose my-6","children":["$","div",null,{"className":"rounded-lg border border-zinc-200 dark:border-zinc-800 bg-zinc-50 dark:bg-zinc-900 p-4","children":["$","div",null,{"className":"flex items-start gap-3","children":[["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","width":24,"height":24,"viewBox":"0 0 24 24","fill":"none","stroke":"currentColor","strokeWidth":2,"strokeLinecap":"round","strokeLinejoin":"round","className":"lucide lucide-terminal h-5 w-5 mt-0.5 text-zinc-600 dark:text-zinc-400","aria-hidden":"true","children":[["$","path","baeox8",{"d":"M12 19h8"}],["$","path","1yngyt",{"d":"m4 17 6-6-6-6"}],"$undefined"]}],["$","div",null,{"className":"flex-1","children":["$","pre",null,{"className":"text-sm overflow-x-auto","children":["$","code",null,{"children":"aws iam create-role \\\n  --role-name StackSageAuditor \\\n  --assume-role-policy-document file://trust-policy.json \\\n  --description \"Read-only role for StackSage AWS audits\""}]}]}]]}]}]}]
9:["$","h2",null,{"children":"Step 3: Create Custom Policy"}]
a:["$","p",null,{"children":["Create a file ",["$","code",null,{"children":"stacksage-policy.json"}]," with the required permissions:"]}]
26:T4e3,{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Sid": "StackSageReadOnly",
      "Effect": "Allow",
      "Action": [
        "ec2:Describe*",
        "ec2:Get*",
        "s3:ListAllMyBuckets",
        "s3:GetBucket*",
        "s3control:GetPublicAccessBlock",
        "rds:Describe*",
        "rds:ListTagsForResource",
        "iam:GetAccountSummary",
        "iam:GetAccountPasswordPolicy",
        "iam:ListUsers",
        "iam:ListAccessKeys",
        "iam:GetAccessKeyLastUsed",
        "cloudtrail:DescribeTrails",
        "cloudtrail:GetTrailStatus",
        "config:DescribeConfigurationRecorderStatus",
        "guardduty:ListDetectors",
        "securityhub:DescribeHub",
        "access-analyzer:ListAnalyzers",
        "access-analyzer:ListFindings",
        "cloudwatch:GetMetricStatistics",
        "cloudwatch:DescribeAlarms",
        "cloudwatch:ListMetrics",
        "elasticloadbalancing:Describe*",
        "lambda:ListFunctions",
        "lambda:GetFunction",
        "lambda:ListTags",
        "ce:GetCostAndUsage",
        "ce:GetDimensionValues",
        "pricing:GetProducts",
        "tag:GetResources",
        "logs:DescribeLogGroups",
        "logs:DescribeLogStreams"
      ],
      "Resource": "*"
    }
  ]
}b:["$","div",null,{"className":"not-prose my-6","children":["$","div",null,{"className":"rounded-lg border border-zinc-200 dark:border-zinc-800 bg-zinc-50 dark:bg-zinc-900 p-4","children":["$","pre",null,{"className":"text-sm overflow-x-auto","children":["$","code",null,{"children":"$26"}]}]}]}]
c:["$","h2",null,{"children":"Step 4: Attach Policy"}]
d:["$","p",null,{"children":"Create and attach the custom policy to the role:"}]
e:["$","div",null,{"className":"not-prose my-6","children":["$","div",null,{"className":"rounded-lg border border-zinc-200 dark:border-zinc-800 bg-zinc-50 dark:bg-zinc-900 p-4","children":["$","div",null,{"className":"flex items-start gap-3","children":[["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","width":24,"height":24,"viewBox":"0 0 24 24","fill":"none","stroke":"currentColor","strokeWidth":2,"strokeLinecap":"round","strokeLinejoin":"round","className":"lucide lucide-terminal h-5 w-5 mt-0.5 text-zinc-600 dark:text-zinc-400","aria-hidden":"true","children":[["$","path","baeox8",{"d":"M12 19h8"}],["$","path","1yngyt",{"d":"m4 17 6-6-6-6"}],"$undefined"]}],["$","div",null,{"className":"flex-1","children":["$","pre",null,{"className":"text-sm overflow-x-auto","children":["$","code",null,{"children":"# Create the policy\naws iam create-policy \\\n  --policy-name StackSageAuditPolicy \\\n  --policy-document file://stacksage-policy.json\n\n# Attach to role\naws iam attach-role-policy \\\n  --role-name StackSageAuditor \\\n  --policy-arn arn:aws:iam::YOUR_ACCOUNT_ID:policy/StackSageAuditPolicy"}]}]}]]}]}]}]
f:["$","h2",null,{"children":"Step 5: Configure GitHub Secrets"}]
10:["$","p",null,{"children":"Add the role ARN to your GitHub repository secrets:"}]
11:["$","ol",null,{"children":[["$","li",null,{"children":"Go to your repository → Settings → Secrets and variables → Actions"}],["$","li",null,{"children":"Click \"New repository secret\""}],["$","li",null,{"children":["Name: ",["$","code",null,{"children":"AWS_ROLE_ARN"}]]}],["$","li",null,{"children":["Value: ",["$","code",null,{"children":"arn:aws:iam::YOUR_ACCOUNT_ID:role/StackSageAuditor"}]]}]]}]
12:["$","h2",null,{"children":"Alternative: Using AWS Managed Policies"}]
13:["$","p",null,{"children":"For quick setup, you can use AWS managed policies (though custom policies are more restrictive):"}]
14:["$","div",null,{"className":"not-prose my-6","children":["$","div",null,{"className":"rounded-lg border border-zinc-200 dark:border-zinc-800 bg-zinc-50 dark:bg-zinc-900 p-4","children":["$","div",null,{"className":"flex items-start gap-3","children":[["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","width":24,"height":24,"viewBox":"0 0 24 24","fill":"none","stroke":"currentColor","strokeWidth":2,"strokeLinecap":"round","strokeLinejoin":"round","className":"lucide lucide-terminal h-5 w-5 mt-0.5 text-zinc-600 dark:text-zinc-400","aria-hidden":"true","children":[["$","path","baeox8",{"d":"M12 19h8"}],["$","path","1yngyt",{"d":"m4 17 6-6-6-6"}],"$undefined"]}],["$","div",null,{"className":"flex-1","children":["$","pre",null,{"className":"text-sm overflow-x-auto","children":["$","code",null,{"children":"aws iam attach-role-policy \\\n  --role-name StackSageAuditor \\\n  --policy-arn arn:aws:iam::aws:policy/ReadOnlyAccess\n\naws iam attach-role-policy \\\n  --role-name StackSageAuditor \\\n  --policy-arn arn:aws:iam::aws:policy/CloudWatchReadOnlyAccess"}]}]}]]}]}]}]
15:["$","h2",null,{"children":"Verification"}]
16:["$","p",null,{"children":"Test your IAM setup by running the workflow manually:"}]
17:["$","ol",null,{"children":[["$","li",null,{"children":"Go to your repository's Actions tab"}],["$","li",null,{"children":"Select \"StackSage AWS Audit\""}],["$","li",null,{"children":"Click \"Run workflow\""}],["$","li",null,{"children":"Check for authentication errors in the logs"}]]}]
18:["$","h2",null,{"children":"Multi-Account Setup"}]
19:["$","p",null,{"children":"To audit multiple AWS accounts, create the role in each account with the same name, then configure your workflow to loop through accounts:"}]
1a:["$","div",null,{"className":"not-prose my-6","children":["$","div",null,{"className":"rounded-lg border border-zinc-200 dark:border-zinc-800 bg-zinc-50 dark:bg-zinc-900 p-4","children":["$","pre",null,{"className":"text-sm overflow-x-auto","children":["$","code",null,{"children":"strategy:\n  matrix:\n    account:\n      - name: Production\n        role: arn:aws:iam::111111111111:role/StackSageAuditor\n      - name: Staging\n        role: arn:aws:iam::222222222222:role/StackSageAuditor\nsteps:\n  - uses: aws-actions/configure-aws-credentials@v4\n    with:\n      role-to-assume: ${{ matrix.account.role }}"}]}]}]}]
1b:["$","h2",null,{"children":"Security Best Practices"}]
1c:["$","ul",null,{"children":[["$","li",null,{"children":[["$","strong",null,{"children":"Use OIDC:"}]," Avoid long-lived access keys"]}],["$","li",null,{"children":[["$","strong",null,{"children":"Scope trust policy:"}]," Limit to specific repositories"]}],["$","li",null,{"children":[["$","strong",null,{"children":"Custom policies:"}]," Use least-privilege custom policies over managed policies"]}],["$","li",null,{"children":[["$","strong",null,{"children":"Regular audits:"}]," Review role permissions quarterly"]}],["$","li",null,{"children":[["$","strong",null,{"children":"CloudTrail:"}]," Monitor AssumeRole API calls for the StackSage role"]}]]}]
1d:["$","h2",null,{"children":"Troubleshooting"}]
1e:["$","h3",null,{"children":"Error: \"User is not authorized to perform: sts:AssumeRoleWithWebIdentity\""}]
1f:["$","p",null,{"children":"The OIDC provider is not configured or the trust policy is incorrect. Verify:"}]
20:["$","ul",null,{"children":[["$","li",null,{"children":"OIDC provider exists in IAM console"}],["$","li",null,{"children":"Trust policy references correct GitHub org/repo"}],["$","li",null,{"children":["Trust policy condition matches ",["$","code",null,{"children":"sts.amazonaws.com"}]]}]]}]
21:["$","h3",null,{"children":"Error: \"Access Denied\" on specific API calls"}]
22:["$","p",null,{"children":"The attached policy is missing required permissions. Compare against the custom policy above."}]
23:["$","h2",null,{"children":"Related Topics"}]
24:["$","ul",null,{"children":[["$","li",null,{"children":["$","$L27",null,{"href":"/docs/quick-start","children":"Quick Start Guide"}]}],["$","li",null,{"children":["$","$L27",null,{"href":"/docs/github-actions","children":"GitHub Actions Setup"}]}],["$","li",null,{"children":["$","$L27",null,{"href":"/docs/privacy","children":"Privacy & Data Handling"}]}],["$","li",null,{"children":["$","$L27",null,{"href":"/docs/security","children":"Security Best Practices"}]}]]}]
25:["$","$L28",null,{"children":["$","$29",null,{"name":"Next.MetadataOutlet","children":"$@2a"}]}]
2a:null
